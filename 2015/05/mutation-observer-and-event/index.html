<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>用 MutationObserver 和 Mutation events 监听 DOM 变化 | Hans Chan&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="最近需要做一个功能，检查页面 DOM 变化，然后对变化的某些 DOM 进行一些操作。于是上网搜索到 MutationObserver，中文文档已经很清楚了，看起来使用也很简单，于是就写下这么一个方法：">
<meta property="og:type" content="article">
<meta property="og:title" content="用 MutationObserver 和 Mutation events 监听 DOM 变化">
<meta property="og:url" content="http://csbun.github.io/blog/2015/05/mutation-observer-and-event/index.html">
<meta property="og:site_name" content="Hans Chan's Blog">
<meta property="og:description" content="最近需要做一个功能，检查页面 DOM 变化，然后对变化的某些 DOM 进行一些操作。于是上网搜索到 MutationObserver，中文文档已经很清楚了，看起来使用也很简单，于是就写下这么一个方法：">
<meta property="og:updated_time" content="2015-10-27T10:12:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="用 MutationObserver 和 Mutation events 监听 DOM 变化">
<meta name="twitter:description" content="最近需要做一个功能，检查页面 DOM 变化，然后对变化的某些 DOM 进行一些操作。于是上网搜索到 MutationObserver，中文文档已经很清楚了，看起来使用也很简单，于是就写下这么一个方法：">
  
    <link rel="alternative" href="/blog/atom.xml" title="Hans Chan&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/blog/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hans Chan&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://csbun.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-mutation-observer-and-event" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2015/05/mutation-observer-and-event/" class="article-date">
  <time datetime="2015-05-13T06:44:37.000Z" itemprop="datePublished">2015-05-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      用 MutationObserver 和 Mutation events 监听 DOM 变化
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>&#x6700;&#x8FD1;&#x9700;&#x8981;&#x505A;&#x4E00;&#x4E2A;&#x529F;&#x80FD;&#xFF0C;&#x68C0;&#x67E5;&#x9875;&#x9762; DOM &#x53D8;&#x5316;&#xFF0C;&#x7136;&#x540E;&#x5BF9;&#x53D8;&#x5316;&#x7684;&#x67D0;&#x4E9B; DOM &#x8FDB;&#x884C;&#x4E00;&#x4E9B;&#x64CD;&#x4F5C;&#x3002;&#x4E8E;&#x662F;&#x4E0A;&#x7F51;&#x641C;&#x7D22;&#x5230; <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver" target="_blank" rel="external">MutationObserver</a>&#xFF0C;&#x4E2D;&#x6587;&#x6587;&#x6863;&#x5DF2;&#x7ECF;&#x5F88;&#x6E05;&#x695A;&#x4E86;&#xFF0C;&#x770B;&#x8D77;&#x6765;&#x4F7F;&#x7528;&#x4E5F;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x4E8E;&#x662F;&#x5C31;&#x5199;&#x4E0B;&#x8FD9;&#x4E48;&#x4E00;&#x4E2A;&#x65B9;&#x6CD5;&#xFF1A;</p>
<a id="more"></a>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> observeDOMChanges = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="comment">// &#x5BF9;&#x53D8;&#x5316;&#x7684; dom &#x7684;&#x64CD;&#x4F5C;</span></span><br><span class="line">    <span class="keyword">var</span> changedHandler = <span class="function"><span class="keyword">function</span> (<span class="params">element</span>) </span>{</span><br><span class="line">        <span class="comment">// do with element ...</span></span><br><span class="line">    };</span><br><span class="line">    <span class="comment">// &#x517C;&#x5BB9;&#x6D4F;&#x89C8;&#x5668;&#x524D;&#x7F00;</span></span><br><span class="line">    <span class="keyword">var</span> MutationObserver = <span class="built_in">window</span>.MutationObserver ||</span><br><span class="line">                           <span class="built_in">window</span>.WebKitMutationObserver ||</span><br><span class="line">                           <span class="built_in">window</span>.MozMutationObserver;</span><br><span class="line">    <span class="comment">// MutationObserver &#x914D;&#x7F6E;</span></span><br><span class="line">    <span class="keyword">var</span> MutationObserverConfig = {</span><br><span class="line">        <span class="comment">// &#x76D1;&#x542C;&#x5B50;&#x8282;&#x70B9;</span></span><br><span class="line">        childList: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// &#x76D1;&#x542C; href &#x5C5E;&#x6027;</span></span><br><span class="line">        attributes: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// &#x76D1;&#x542C;&#x6574;&#x68F5;&#x6811;</span></span><br><span class="line">        subtree: <span class="literal">true</span></span><br><span class="line">    };</span><br><span class="line">    <span class="comment">// &#x76D1;&#x542C;&#x5668;</span></span><br><span class="line">    <span class="keyword">var</span> observer = MutationObserver ? <span class="keyword">new</span> MutationObserver(<span class="function"><span class="keyword">function</span> (<span class="params">mutations</span>) </span>{</span><br><span class="line">        mutations.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">mutation</span>) </span>{</span><br><span class="line">            <span class="comment">// &#x5904;&#x7406; &#x53D8;&#x5316;&#x7684; DOM</span></span><br><span class="line">            changedHandler(mutation.target);</span><br><span class="line">            <span class="comment">// &#x5904;&#x7406; &#x65B0;&#x589E;&#x7684; DOM</span></span><br><span class="line">            <span class="keyword">if</span> (mutation.addedNodes) {</span><br><span class="line">                mutation.addedNodes.forEach(changedHandler);</span><br><span class="line">            }</span><br><span class="line">            <span class="comment">// &#x5220;&#x9664;&#x7684; DOM &#x65E0;&#x9700;&#x5904;&#x7406; (mutation.removedNodes)</span></span><br><span class="line">        });</span><br><span class="line">    }) : <span class="literal">undefined</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> observer ? <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">            observer.observe(<span class="built_in">document</span>.body, MutationObserverConfig);</span><br><span class="line">        } : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&apos;MutationObserver not support!&apos;</span>);</span><br><span class="line">        };</span><br><span class="line">    }</span><br><span class="line">})();</span><br></pre></td></tr></table></figure>
<p>&#x4F46;&#x662F;&#x770B;&#x770B;&#x6D4F;&#x89C8;&#x5668;&#x517C;&#x5BB9;&#x60C5;&#x51B5;&#xFF0C;IE &#x8981; 11+ &#x5416;&#xFF01;&#x641E;&#x4E0D;&#x6765;&#xFF0C;&#x4E8E;&#x662F;&#x53EA;&#x80FD;&#x628A;&#x88AB;&#x629B;&#x5F03;&#x7684; <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events" target="_blank" rel="external">Mutation events</a> &#x6361;&#x8FC7;&#x6765;&#xFF0C;&#x636E;&#x8BF4;&#x6027;&#x80FD;&#x4E5F;&#x4E0D;&#x662F;&#x5F88;&#x597D;&#x3002;</p>
<blockquote>
<p>This feature has been removed from the Web. Though some browsers may still support it, it is in the process of being dropped. Do not use it in old or new projects. Pages or Web apps using it may break at any time.</p>
</blockquote>
<p>&#x4EE3;&#x7801;&#x7247;&#x6BB5;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> observeDOMChanges = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">var</span> bindMutationEvents = <span class="function"><span class="keyword">function</span> (<span class="params">eventName</span>) </span>{</span><br><span class="line">        <span class="built_in">document</span>.body.addEventListener(eventName, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>{</span><br><span class="line">            changedHandler(e.target);</span><br><span class="line">        });</span><br><span class="line">    };</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">        bindMutationEvents(<span class="string">&apos;DOMSubtreeModified&apos;</span>);</span><br><span class="line">        bindMutationEvents(<span class="string">&apos;DOMNodeInserted&apos;</span>);</span><br><span class="line">    };</span><br><span class="line">})();</span><br></pre></td></tr></table></figure>
<p>&#x56E0;&#x4E3A; Mutation events &#x4E5F;&#x53EA;&#x652F;&#x6301;&#x5230; IE9+&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x7528; <code>addEventListener</code> &#x6765;&#x8FDB;&#x884C;&#x5224;&#x65AD;&#xFF0C;&#x5C06;&#x517C;&#x5BB9;&#x5224;&#x65AD;&#x52A0;&#x8D77;&#x6765;&#x5B8C;&#x6574;&#x4EE3;&#x7801;&#x5C31;&#x662F;&#xFF1A;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> observeDOMChanges = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">    <span class="comment">// &#x5BF9;&#x53D8;&#x5316;&#x7684; dom &#x7684;&#x64CD;&#x4F5C;</span></span><br><span class="line">    <span class="keyword">var</span> changedHandler = <span class="function"><span class="keyword">function</span> (<span class="params">element</span>) </span>{</span><br><span class="line">        <span class="comment">// do with element ...</span></span><br><span class="line">    };</span><br><span class="line">    <span class="comment">// &#x68C0;&#x67E5; MutationObserver &#x6D4F;&#x89C8;&#x5668;&#x517C;&#x5BB9;</span></span><br><span class="line">    <span class="keyword">var</span> MutationObserver = <span class="built_in">window</span>.MutationObserver ||</span><br><span class="line">                           <span class="built_in">window</span>.WebKitMutationObserver ||</span><br><span class="line">                           <span class="built_in">window</span>.MozMutationObserver;</span><br><span class="line">    <span class="keyword">if</span> (MutationObserver) {</span><br><span class="line">        <span class="comment">// MutationObserver &#x914D;&#x7F6E;</span></span><br><span class="line">        <span class="keyword">var</span> MutationObserverConfig = {</span><br><span class="line">            <span class="comment">// &#x76D1;&#x542C;&#x5B50;&#x8282;&#x70B9;</span></span><br><span class="line">            childList: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">// &#x76D1;&#x542C; href &#x5C5E;&#x6027;</span></span><br><span class="line">            attributes: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">// &#x76D1;&#x542C;&#x6574;&#x68F5;&#x6811;</span></span><br><span class="line">            subtree: <span class="literal">true</span></span><br><span class="line">        };</span><br><span class="line">        <span class="comment">// &#x76D1;&#x542C;&#x5668;</span></span><br><span class="line">        <span class="keyword">var</span> observer = <span class="keyword">new</span> MutationObserver(<span class="function"><span class="keyword">function</span> (<span class="params">mutations</span>) </span>{</span><br><span class="line">            mutations.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">mutation</span>) </span>{</span><br><span class="line">                <span class="comment">// &#x5904;&#x7406; &#x53D8;&#x5316;&#x7684; DOM</span></span><br><span class="line">                changedHandler(mutation.target);</span><br><span class="line">                <span class="comment">// &#x5904;&#x7406; &#x65B0;&#x589E;&#x7684; DOM</span></span><br><span class="line">                <span class="keyword">if</span> (mutation.addedNodes) {</span><br><span class="line">                    mutation.addedNodes.forEach(changedHandler);</span><br><span class="line">                }</span><br><span class="line">                <span class="comment">// &#x5220;&#x9664;&#x7684; DOM &#x65E0;&#x9700;&#x5904;&#x7406; (mutation.removedNodes)</span></span><br><span class="line">            });</span><br><span class="line">        });</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">            <span class="comment">// &#x5F00;&#x59CB;&#x76D1;&#x542C;</span></span><br><span class="line">            observer.observe(<span class="built_in">document</span>.body, MutationObserverConfig);</span><br><span class="line">        };</span><br><span class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.body.addEventListener) {</span><br><span class="line">        <span class="comment">// addEventListener &#x548C; Mutation events &#x90FD;&#x662F; IE 9 &#x4EE5;&#x4E0A;&#x624D;&#x652F;&#x6301;</span></span><br><span class="line">        <span class="keyword">var</span> bindMutationEvents = <span class="function"><span class="keyword">function</span> (<span class="params">eventName</span>) </span>{</span><br><span class="line">            <span class="built_in">document</span>.body.addEventListener(eventName, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>{</span><br><span class="line">                changedHandler(e.target);</span><br><span class="line">            });</span><br><span class="line">        };</span><br><span class="line">        <span class="keyword">var</span> binded = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">            <span class="keyword">if</span> (binded) {</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            }</span><br><span class="line">            binded = <span class="literal">true</span>;</span><br><span class="line">            bindMutationEvents(<span class="string">&apos;DOMSubtreeModified&apos;</span>);</span><br><span class="line">            bindMutationEvents(<span class="string">&apos;DOMNodeInserted&apos;</span>);</span><br><span class="line">        };</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">// IE 8- &#x5C31;&#x4E0D;&#x7BA1;&#x4E86;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&apos;MutationObserver not support!&apos;</span>);</span><br><span class="line">        };</span><br><span class="line">    }</span><br><span class="line">})();</span><br></pre></td></tr></table></figure>
<p>&#x55EF;&#xFF0C;IE8- &#x600E;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x653E;&#x5F03;&#x4E86;&#x5462;&#xFF1F;&#x4F46;&#x662F;&#x5B9E;&#x5728;&#x662F;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x597D;&#x7684;&#x529E;&#x6CD5;&#xFF0C;&#x53EF;&#x4EE5;&#x5C1D;&#x8BD5;&#x7528; <code>setTimeout</code> &#x5B9A;&#x65F6;&#x53BB;&#x68C0;&#x67E5;&#x5427;&#xFF0C;&#x4F46;&#x4F30;&#x8BA1;&#x5199;&#x8D77;&#x6765;&#x53C8;&#x4E00;&#x5927;&#x5806;&#x4E86; &#x256E;(&#x256F;_&#x2570;)&#x256D;</p>
<p>&#x53E6;&#x5916;&#x5728;&#x5410;&#x69FD;&#x4E00;&#x70B9;&#xFF0C;Mutation events &#x5728; webkit &#x4E0A;&#x652F;&#x6301;&#x7684;&#x60C5;&#x51B5;&#x548C; IE &#x4E0A;&#x662F;&#x4E0D;&#x540C;&#x7684;&#xFF0C;<code>DOMSubtreeModified</code> &#x5728; IE &#x4E0A;&#x53EF;&#x4EE5;&#x76D1;&#x542C;&#x5230; attr &#x53D8;&#x5316;&#x7684;&#xFF0C;&#x4F46; webkit &#x4E0A;&#x662F;&#x4E0D;&#x884C;&#xFF08;&#x4E0D;&#x7528; MutationObserver &#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF09;&#xFF1A;</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// definition ...</span></span><br><span class="line">observeDOMChanges();</span><br><span class="line"></span><br><span class="line"><span class="comment">// test</span></span><br><span class="line"><span class="keyword">var</span> el = <span class="built_in">document</span>.createElement(<span class="string">&apos;a&apos;</span>);</span><br><span class="line"><span class="comment">// works in IE and webkit via `DOMNodeInserted`</span></span><br><span class="line"><span class="built_in">document</span>.body.appendChild(el);</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="comment">// &lt;a&gt; -&gt; &lt;a href=&quot;xxx&quot;&gt;</span></span><br><span class="line">    <span class="comment">// works in IE and webkit via `DOMSubtreeModified`</span></span><br><span class="line">    el.href = <span class="string">&apos;path/to/somewhere&apos;</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">        <span class="comment">// &lt;a href=&quot;a&quot;&gt; -&gt; &lt;a href=&quot;b&quot;&gt;</span></span><br><span class="line">        <span class="comment">// works in IE via `DOMSubtreeModified`</span></span><br><span class="line">        <span class="comment">// NOT works in webkit</span></span><br><span class="line">        el.href = <span class="string">&apos;path/to/somewhere/else&apos;</span>;</span><br><span class="line">    }, <span class="number">1000</span>);</span><br><span class="line">}, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<p>&#x6240;&#x4EE5;&#xFF0C;wekit &#x5185;&#x6838;&#x8001;&#x8001;&#x5B9E;&#x5B9E;&#x7528; MutationObserver&#xFF0C;&#x662F;&#x6700;&#x597D;&#x7684;&#x3002;&#x4F46;&#x67D0;&#x4E9B; webkit &#x5185;&#x6838;&#x6D4F;&#x89C8;&#x5668;&#x65E2;&#x4E0D;&#x652F;&#x6301; MutationObserver&#xFF0C;Mutation events &#x53C8;&#x652F;&#x6301;&#x4E0D;&#x597D;&#xFF0C;&#x8001;&#x8872;&#x5C31;&#x65E0;&#x80FD;&#x4E3A;&#x529B;&#x4E86;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x63D0;&#x9192;&#x4E00;&#x70B9;&#xFF1A;&#x76D1;&#x542C; DOM &#x53D8;&#x5316;&#x4FEE;&#x6539; DOM &#x6709;&#x98CE;&#x9669;&#xFF0C;&#x5BB9;&#x6613;&#x9020;&#x6210;&#x65E0;&#x9650;&#x5FAA;&#x73AF;&#xFF0C;&#x4E0A;&#x8FF0;&#x4F8B;&#x5B50;&#x7684; <code>changedHandler</code> &#x5FC5;&#x987B;&#x505A;&#x597D;&#x5224;&#x65AD;&#xFF0C;&#x907F;&#x514D;&#x9677;&#x5165;&#x65E0;&#x9650;&#x5FAA;&#x73AF;&#x4E2D;&#x3002;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://csbun.github.io/blog/2015/05/mutation-observer-and-event/" data-id="ciga4wtqv001bthq93sryx72q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/DOM/">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/Mutation-Observer/">Mutation Observer</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/events/">events</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2015/06/service-worker/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          ServiceWorker
        
      </div>
    </a>
  
  
    <a href="/blog/2015/04/use-selenium-for-ui-test/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">使用 Selenium 进行 UI 测试</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/Ajax/" style="font-size: 10px;">Ajax</a> <a href="/blog/tags/Angular/" style="font-size: 20px;">Angular</a> <a href="/blog/tags/Browserify/" style="font-size: 10px;">Browserify</a> <a href="/blog/tags/CommonJS/" style="font-size: 10px;">CommonJS</a> <a href="/blog/tags/DOM/" style="font-size: 10px;">DOM</a> <a href="/blog/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/blog/tags/Filter/" style="font-size: 10px;">Filter</a> <a href="/blog/tags/Flux/" style="font-size: 13.33px;">Flux</a> <a href="/blog/tags/Fluxxor/" style="font-size: 10px;">Fluxxor</a> <a href="/blog/tags/Meteor/" style="font-size: 10px;">Meteor</a> <a href="/blog/tags/Mutation-Observer/" style="font-size: 10px;">Mutation Observer</a> <a href="/blog/tags/NW-js/" style="font-size: 10px;">NW.js</a> <a href="/blog/tags/Node/" style="font-size: 16.67px;">Node</a> <a href="/blog/tags/React/" style="font-size: 16.67px;">React</a> <a href="/blog/tags/RequireJS/" style="font-size: 10px;">RequireJS</a> <a href="/blog/tags/Selenium/" style="font-size: 13.33px;">Selenium</a> <a href="/blog/tags/ServiceWorker/" style="font-size: 10px;">ServiceWorker</a> <a href="/blog/tags/Stateful/" style="font-size: 10px;">Stateful</a> <a href="/blog/tags/async/" style="font-size: 13.33px;">async</a> <a href="/blog/tags/browser-perf/" style="font-size: 10px;">browser-perf</a> <a href="/blog/tags/ci/" style="font-size: 10px;">ci</a> <a href="/blog/tags/contentEditable/" style="font-size: 10px;">contentEditable</a> <a href="/blog/tags/coverage/" style="font-size: 10px;">coverage</a> <a href="/blog/tags/debug/" style="font-size: 10px;">debug</a> <a href="/blog/tags/desktop/" style="font-size: 10px;">desktop</a> <a href="/blog/tags/events/" style="font-size: 10px;">events</a> <a href="/blog/tags/generator/" style="font-size: 10px;">generator</a> <a href="/blog/tags/google/" style="font-size: 10px;">google</a> <a href="/blog/tags/koa/" style="font-size: 10px;">koa</a> <a href="/blog/tags/less/" style="font-size: 10px;">less</a> <a href="/blog/tags/log/" style="font-size: 10px;">log</a> <a href="/blog/tags/logo/" style="font-size: 10px;">logo</a> <a href="/blog/tags/performance/" style="font-size: 10px;">performance</a> <a href="/blog/tags/permissions/" style="font-size: 10px;">permissions</a> <a href="/blog/tags/requestAnimationFrame/" style="font-size: 10px;">requestAnimationFrame</a> <a href="/blog/tags/requestIdleCallback/" style="font-size: 10px;">requestIdleCallback</a> <a href="/blog/tags/test/" style="font-size: 13.33px;">test</a> <a href="/blog/tags/ui/" style="font-size: 10px;">ui</a> <a href="/blog/tags/webkit/" style="font-size: 10px;">webkit</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/07/">July 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/06/">June 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/05/">May 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/04/">April 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/03/">March 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2015/02/">February 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2014/12/">December 2014</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2014/09/">September 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2015/09/using-contenteditable/">Using Contenteditable</a>
          </li>
        
          <li>
            <a href="/blog/2015/09/using-iron-node/">使用 iron-node 进行 Node Debug</a>
          </li>
        
          <li>
            <a href="/blog/2015/09/google-new-logo/">Google 换新 Logo 了</a>
          </li>
        
          <li>
            <a href="/blog/2015/09/raf-and-ric/">requestAnimationFrame 和 requestIdleCallback</a>
          </li>
        
          <li>
            <a href="/blog/2015/07/meteor-react/">Meteor + React</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 Hans Chan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/blog/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/blog/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>